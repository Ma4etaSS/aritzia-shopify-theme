{%- liquid
  assign transparent_header = false
  if template.name == 'index'
    assign transparent_header = true
  endif
-%}

<header class="header {% if transparent_header %}header--transparent{% else %}header--solid{% endif %}" data-header>
  <div class="header__wrapper">
    <!-- Logo -->
    <a href="/" class="header__logo">
      {{ shop.name }}
    </a>

    <!-- Desktop Navigation -->
    <nav class="header__nav" role="navigation">
      <div class="header__nav-item" data-nav-item>
        <span>New</span>
        <div class="mega-menu">
          <div class="mega-menu__grid">
            <div class="mega-menu__column">
              <h4>Categories</h4>
              <div class="mega-menu__links">
                <a href="/collections/all" class="mega-menu__link">All New</a>
                <a href="/collections/all" class="mega-menu__link">New This Week</a>
                <a href="/collections/all" class="mega-menu__link">Back In</a>
              </div>
            </div>
            <div class="mega-menu__column">
              <h4>Featured</h4>
              <div class="mega-menu__links">
                <a href="/collections/all" class="mega-menu__link">Work Wardrobe</a>
                <a href="/collections/all" class="mega-menu__link">Valentine's Day</a>
                <a href="/collections/all" class="mega-menu__link">The Pre-Spring Collection</a>
                <a href="/collections/all" class="mega-menu__link">Must-Haves</a>
              </div>
            </div>
            <div class="mega-menu__column">
              <h4>Trends</h4>
              <div class="mega-menu__links">
                <a href="/collections/all" class="mega-menu__link">After Dark</a>
                <a href="/collections/all" class="mega-menu__link">Villa Blue</a>
              </div>
            </div>
            <div class="mega-menu__column"></div>
            <div class="mega-menu__images">
              <a href="/collections/all" class="mega-menu__image-card">
                <img src="https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=400&h=500&fit=crop" alt="Work Wardrobe" loading="lazy">
                <span class="mega-menu__image-label">Work Wardrobe</span>
              </a>
              <a href="/collections/all" class="mega-menu__image-card">
                <img src="https://images.unsplash.com/photo-1509631179647-0177331693ae?w=400&h=500&fit=crop" alt="After Dark" loading="lazy">
                <span class="mega-menu__image-label">After Dark</span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="header__nav-item" data-nav-item>
        <span>Clothing</span>
        <div class="mega-menu">
          <div class="mega-menu__grid">
            <div class="mega-menu__column">
              <h4>Tops</h4>
              <div class="mega-menu__links">
                <a href="/collections/all" class="mega-menu__link">All Tops</a>
                <a href="/collections/all" class="mega-menu__link">T-Shirts</a>
                <a href="/collections/all" class="mega-menu__link">Blouses</a>
                <a href="/collections/all" class="mega-menu__link">Bodysuits</a>
              </div>
            </div>
            <div class="mega-menu__column">
              <h4>Bottoms</h4>
              <div class="mega-menu__links">
                <a href="/collections/all" class="mega-menu__link">All Bottoms</a>
                <a href="/collections/all" class="mega-menu__link">Pants</a>
                <a href="/collections/all" class="mega-menu__link">Jeans</a>
                <a href="/collections/all" class="mega-menu__link">Skirts</a>
              </div>
            </div>
            <div class="mega-menu__column">
              <h4>Dresses</h4>
              <div class="mega-menu__links">
                <a href="/collections/all" class="mega-menu__link">All Dresses</a>
                <a href="/collections/all" class="mega-menu__link">Mini</a>
                <a href="/collections/all" class="mega-menu__link">Midi</a>
                <a href="/collections/all" class="mega-menu__link">Maxi</a>
              </div>
            </div>
            <div class="mega-menu__column">
              <h4>Outerwear</h4>
              <div class="mega-menu__links">
                <a href="/collections/all" class="mega-menu__link">All Outerwear</a>
                <a href="/collections/all" class="mega-menu__link">Jackets</a>
                <a href="/collections/all" class="mega-menu__link">Coats</a>
                <a href="/collections/all" class="mega-menu__link">Blazers</a>
              </div>
            </div>
            <div class="mega-menu__images">
              <a href="/collections/all" class="mega-menu__image-card">
                <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400&h=500&fit=crop" alt="Dresses" loading="lazy">
                <span class="mega-menu__image-label">Dresses</span>
              </a>
              <a href="/collections/all" class="mega-menu__image-card">
                <img src="https://images.unsplash.com/photo-1591369822096-ffd140ec948f?w=400&h=500&fit=crop" alt="Jackets" loading="lazy">
                <span class="mega-menu__image-label">Jackets & Coats</span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <a href="/collections/all" class="header__nav-item">
        <span>The Super Puffâ„¢</span>
      </a>

      <a href="/collections/all" class="header__nav-item">
        <span>Sweatfleece</span>
      </a>

      <a href="/collections/all" class="header__nav-item">
        <span>Accessories</span>
      </a>

      <a href="/collections/all" class="header__nav-item">
        <span>Brands</span>
      </a>
    </nav>

    <!-- Header Icons -->
    <div class="header__icons">
      <button class="header__icon header__search" type="button" aria-label="Search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="11" cy="11" r="8"/>
          <path d="M21 21l-4.35-4.35"/>
        </svg>
        <span class="header__search-text">Search</span>
      </button>

      <a href="/account" class="header__icon" aria-label="Account">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="3" y="4" width="18" height="16" rx="2"/>
          <path d="M8 10h8M8 14h4"/>
        </svg>
      </a>

      <a href="/collections/wishlist" class="header__icon" aria-label="Wishlist">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
        </svg>
      </a>

      <a href="/account/login" class="header__icon" aria-label="Sign In">
        <span>Sign In</span>
      </a>

      <button class="header__menu-toggle" type="button" aria-label="Menu" data-menu-toggle>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
      </button>
    </div>
  </div>
</header>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const header = document.querySelector('[data-header]');
  let lastScroll = 0;
  
  function updateHeader() {
    const scroll = window.scrollY;
    const isHomepage = document.body.classList.contains('template-index');
    
    if (isHomepage) {
      if (scroll > 100) {
        header.classList.remove('header--transparent');
        header.classList.add('header--solid');
      } else {
        header.classList.add('header--transparent');
        header.classList.remove('header--solid');
      }
    }
    
    lastScroll = scroll;
  }
  
  window.addEventListener('scroll', updateHeader, { passive: true });
  updateHeader();
});
</script>

{% schema %}
{
  "name": "Header",
  "class": "section-header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 10,
      "default": 150,
      "label": "Logo width"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "enable_search",
      "label": "Enable search",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_account",
      "label": "Enable account link",
      "default": true
    }
  ]
}
{% endschema %}
