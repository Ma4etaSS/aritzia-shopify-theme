{%- liquid
  assign is_transparent = false
  if template.name == 'index' and section.settings.transparent_header
    assign is_transparent = true
  endif
-%}

<header class="header {% if is_transparent %}header--transparent{% endif %}" data-header>
  <div class="header__inner">
    <!-- Mobile Menu Toggle -->
    <button type="button" class="header__menu-toggle" data-menu-toggle aria-label="Open menu">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="24" height="24">
        <line x1="3" y1="6" x2="21" y2="6"/>
        <line x1="3" y1="12" x2="21" y2="12"/>
        <line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    </button>

    <!-- Logo -->
    <div class="header__logo">
      <a href="/" class="header__logo-link">
        {%- if settings.logo != blank -%}
          <img 
            src="{{ settings.logo | image_url: width: 300 }}"
            alt="{{ shop.name }}"
            class="header__logo-image"
            width="150"
            height="auto"
            loading="eager"
          >
        {%- else -%}
          <span class="header__logo-text">{{ shop.name }}</span>
        {%- endif -%}
      </a>
    </div>

    <!-- Main Navigation -->
    <nav class="header__nav" aria-label="Main navigation">
      <ul class="header__nav-list">
        <!-- New -->
        <li class="header__nav-item has-mega-menu">
          <button type="button" class="header__nav-link" data-mega-menu-trigger aria-expanded="false" aria-haspopup="true">
            <span>New</span>
            <svg class="header__nav-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="10" height="10">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <div class="mega-menu" aria-hidden="true">
            <div class="mega-menu__inner">
              <div class="mega-menu__column">
                <p class="mega-menu__heading">Categories</p>
                <ul class="mega-menu__list">
                  <li><a href="/collections/all" class="mega-menu__link">All New</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">New This Week</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Back In</a></li>
                </ul>
              </div>
              <div class="mega-menu__column">
                <p class="mega-menu__heading">Featured</p>
                <ul class="mega-menu__list">
                  <li><a href="/collections/all" class="mega-menu__link">Work Wardrobe</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Valentine's Day</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">The Pre-Spring Collection</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Must-Haves</a></li>
                </ul>
              </div>
              <div class="mega-menu__column">
                <p class="mega-menu__heading">Trends</p>
                <ul class="mega-menu__list">
                  <li><a href="/collections/all" class="mega-menu__link">After Dark</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Villa Blue</a></li>
                </ul>
              </div>
              <div class="mega-menu__image">
                <a href="/collections/all">
                  <img 
                    src="https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=400&h=500&fit=crop" 
                    alt="New Arrivals" 
                    loading="lazy"
                  >
                  <span class="mega-menu__image-caption">Shop New Arrivals</span>
                </a>
              </div>
            </div>
          </div>
        </li>

        <!-- Clothing -->
        <li class="header__nav-item has-mega-menu">
          <button type="button" class="header__nav-link" data-mega-menu-trigger aria-expanded="false" aria-haspopup="true">
            <span>Clothing</span>
            <svg class="header__nav-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="10" height="10">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <div class="mega-menu" aria-hidden="true">
            <div class="mega-menu__inner">
              <div class="mega-menu__column">
                <p class="mega-menu__heading">Tops</p>
                <ul class="mega-menu__list">
                  <li><a href="/collections/all" class="mega-menu__link">All Tops</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">T-Shirts</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Blouses</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Bodysuits</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Sweaters</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Sweatshirts</a></li>
                </ul>
              </div>
              <div class="mega-menu__column">
                <p class="mega-menu__heading">Bottoms</p>
                <ul class="mega-menu__list">
                  <li><a href="/collections/all" class="mega-menu__link">All Bottoms</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Pants</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Jeans</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Skirts</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Shorts</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Leggings</a></li>
                </ul>
              </div>
              <div class="mega-menu__column">
                <p class="mega-menu__heading">Dresses & Jumpsuits</p>
                <ul class="mega-menu__list">
                  <li><a href="/collections/all" class="mega-menu__link">All Dresses</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Mini</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Midi</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Maxi</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Jumpsuits</a></li>
                </ul>
              </div>
              <div class="mega-menu__column">
                <p class="mega-menu__heading">Outerwear</p>
                <ul class="mega-menu__list">
                  <li><a href="/collections/all" class="mega-menu__link">All Outerwear</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Jackets</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Coats</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Blazers</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Vests</a></li>
                </ul>
              </div>
              <div class="mega-menu__image">
                <a href="/collections/all">
                  <img 
                    src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=500&fit=crop" 
                    alt="Shop Clothing" 
                    loading="lazy"
                  >
                  <span class="mega-menu__image-caption">Shop All Clothing</span>
                </a>
              </div>
            </div>
          </div>
        </li>

        <!-- The Super Puff -->
        <li class="header__nav-item">
          <a href="/collections/all" class="header__nav-link">The Super Puffâ„¢</a>
        </li>

        <!-- Sweatfleece -->
        <li class="header__nav-item">
          <a href="/collections/all" class="header__nav-link">Sweatfleece</a>
        </li>

        <!-- Accessories -->
        <li class="header__nav-item has-mega-menu">
          <button type="button" class="header__nav-link" data-mega-menu-trigger aria-expanded="false" aria-haspopup="true">
            <span>Accessories</span>
            <svg class="header__nav-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="10" height="10">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <div class="mega-menu" aria-hidden="true">
            <div class="mega-menu__inner">
              <div class="mega-menu__column">
                <p class="mega-menu__heading">Accessories</p>
                <ul class="mega-menu__list">
                  <li><a href="/collections/all" class="mega-menu__link">All Accessories</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Bags</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Hats</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Scarves</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Belts</a></li>
                  <li><a href="/collections/all" class="mega-menu__link">Jewelry</a></li>
                </ul>
              </div>
              <div class="mega-menu__image">
                <a href="/collections/all">
                  <img 
                    src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400&h=500&fit=crop" 
                    alt="Shop Accessories" 
                    loading="lazy"
                  >
                  <span class="mega-menu__image-caption">Shop Accessories</span>
                </a>
              </div>
            </div>
          </div>
        </li>

        <!-- Brands -->
        <li class="header__nav-item">
          <a href="/collections/all" class="header__nav-link">Brands</a>
        </li>
      </ul>
    </nav>

    <!-- Header Actions -->
    <div class="header__actions">
      <!-- Search -->
      <button type="button" class="header__action" data-search-toggle aria-label="Search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="20" height="20">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
      </button>

      <!-- Account -->
      <a href="/account" class="header__action header__action--desktop" aria-label="Account">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="20" height="20">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
      </a>

      <!-- Wishlist -->
      <a href="/pages/wishlist" class="header__action header__action--desktop" aria-label="Wishlist">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="20" height="20">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
        </svg>
        <span class="header__action-count" data-wishlist-count style="display: none;">0</span>
      </a>

      <!-- Cart -->
      <button type="button" class="header__action" data-cart-toggle aria-label="Cart">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="20" height="20">
          <path d="M6 6h15l-1.5 9h-12z"/>
          <circle cx="9" cy="20" r="1"/>
          <circle cx="18" cy="20" r="1"/>
          <path d="M6 6L5 3H2"/>
        </svg>
        <span class="header__action-count" data-cart-count {% if cart.item_count == 0 %}style="display: none;"{% endif %}>{{ cart.item_count }}</span>
      </button>
    </div>
  </div>
</header>

<style>
.header {
  position: fixed;
  top: var(--announcement-height);
  left: 0;
  right: 0;
  z-index: 1000;
  background: var(--color-background);
  border-bottom: 1px solid var(--color-border);
  transition: all 0.3s ease;
}

.header--transparent {
  background: transparent;
  border-bottom-color: transparent;
}

.header--transparent:not(.header--scrolled) .header__logo-text,
.header--transparent:not(.header--scrolled) .header__nav-link,
.header--transparent:not(.header--scrolled) .header__action {
  color: #fff;
}

.header--transparent:not(.header--scrolled) .mega-menu {
  background: #ffffff;
}

.header--transparent:not(.header--scrolled) .mega-menu__inner {
  background: #ffffff;
}

.header--transparent:not(.header--scrolled) .mega-menu__heading {
  color: #000000;
}

.header--transparent:not(.header--scrolled) .mega-menu__link {
  color: #333333;
}

.header--transparent:not(.header--scrolled) .mega-menu__link:hover {
  color: #000000;
}

.header--scrolled {
  background: var(--color-background);
  border-bottom-color: var(--color-border);
}

.header--scrolled .header__logo-text,
.header--scrolled .header__nav-link,
.header--scrolled .header__action {
  color: var(--color-text);
}

.header--hidden {
  transform: translateY(-100%);
}

.header__inner {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  height: var(--header-height);
  padding: 0 var(--container-padding);
  max-width: var(--container-max);
  margin: 0 auto;
  gap: 20px;
}

@media (max-width: 1023px) {
  .header__inner {
    display: flex;
    justify-content: space-between;
  }
}

/* Mobile Menu Toggle */
.header__menu-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  margin-left: -8px;
}

@media (min-width: 1024px) {
  .header__menu-toggle {
    display: none;
  }
}

/* Logo */
.header__logo {
  flex-shrink: 0;
  justify-self: center;
  text-align: center;
}

.header__logo-link {
  display: block;
}

.header__logo-text {
  font-family: var(--font-heading);
  font-size: 18px;
  font-weight: 400;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  white-space: nowrap;
}

@media (min-width: 768px) {
  .header__logo-text {
    font-size: 20px;
  }
}

@media (min-width: 1200px) {
  .header__logo-text {
    font-size: 24px;
    letter-spacing: 0.15em;
  }
}

.header__logo-image {
  height: 28px;
  width: auto;
}

@media (min-width: 768px) {
  .header__logo-image {
    height: 34px;
  }
}

/* Navigation */
.header__nav {
  display: none;
  justify-self: start;
}

@media (min-width: 1024px) {
  .header__nav {
    display: block;
  }
}

.header__nav-list {
  display: flex;
  align-items: center;
  gap: 20px;
  list-style: none;
}

@media (min-width: 1200px) {
  .header__nav-list {
    gap: 24px;
  }
}

@media (min-width: 1400px) {
  .header__nav-list {
    gap: 28px;
  }
}

.header__nav-item {
  position: relative;
}

.header__nav-link {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px 0;
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  transition: opacity 0.2s ease;
  white-space: nowrap;
}

@media (min-width: 1200px) {
  .header__nav-link {
    font-size: 12px;
    letter-spacing: 0.08em;
  }
}

.header__nav-link:hover {
  opacity: 0.6;
}

.header__nav-arrow {
  transition: transform 0.2s ease;
}

.header__nav-link[aria-expanded="true"] .header__nav-arrow {
  transform: rotate(180deg);
}

/* Mega Menu - Full Width Desktop */
.mega-menu {
  position: fixed;
  top: calc(var(--announcement-height) + var(--header-height));
  left: 0;
  right: 0;
  width: 100vw;
  background: #ffffff;
  border: none;
  border-top: 1px solid #e5e5e5;
  box-shadow: 0 20px 60px rgba(0,0,0,0.15);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 0.25s ease, visibility 0.25s ease;
  z-index: 999;
}

.mega-menu.is-visible {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

.mega-menu__inner {
  display: flex;
  max-width: var(--container-max-width, 1400px);
  margin: 0 auto;
  padding: 40px var(--container-padding, 40px);
  gap: 48px;
  background: #ffffff;
}

.mega-menu__column {
  min-width: 140px;
  flex-shrink: 0;
}

.mega-menu__heading {
  font-family: var(--font-body);
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  margin-bottom: 20px;
  color: #000000;
  display: block;
}

.mega-menu__list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.mega-menu__link {
  display: block;
  padding: 8px 0;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  transition: color 0.2s ease;
}

.mega-menu__link:hover {
  color: #000000;
}

.mega-menu__image {
  flex-shrink: 0;
  width: 220px;
  margin-left: auto;
}

.mega-menu__image a {
  display: block;
  position: relative;
  overflow: hidden;
}

.mega-menu__image img {
  width: 100%;
  height: 280px;
  object-fit: cover;
  transition: transform 0.4s ease;
}

.mega-menu__image a:hover img {
  transform: scale(1.03);
}

.mega-menu__image-caption {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 20px;
  background: linear-gradient(transparent, rgba(0,0,0,0.6));
  color: #ffffff;
  font-size: 12px;
  font-weight: 500;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

/* Mega Menu - Tablet (hide, use mobile menu) */
@media (max-width: 1023px) {
  .mega-menu {
    display: none !important;
  }
  
  .header__nav {
    display: none;
  }
}

/* Actions */
.header__actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  justify-self: end;
  gap: 4px;
}

@media (min-width: 768px) {
  .header__actions {
    gap: 8px;
  }
}

@media (min-width: 1200px) {
  .header__actions {
    gap: 12px;
  }
}

.header__action {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  transition: opacity 0.2s ease;
}

.header__action:hover {
  opacity: 0.6;
}

.header__action--desktop {
  display: none;
}

@media (min-width: 768px) {
  .header__action--desktop {
    display: flex;
  }
}

.header__action-count {
  position: absolute;
  top: 4px;
  right: 4px;
  min-width: 16px;
  height: 16px;
  padding: 0 4px;
  background: var(--color-foreground);
  color: var(--color-background);
  font-size: 10px;
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
}

.header--transparent:not(.header--scrolled) .header__action-count {
  background: #fff;
  color: #000;
}
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "checkbox",
      "id": "transparent_header",
      "label": "Transparent header on homepage",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "sticky_header",
      "label": "Sticky header",
      "default": true
    }
  ]
}
{% endschema %}
