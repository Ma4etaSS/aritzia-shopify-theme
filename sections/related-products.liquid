{%- comment -%}
  Related Products Section
{%- endcomment -%}

{%- if recommendations.performed and recommendations.products_count > 0 -%}
  <section class="related-products section">
    <div class="related-products__container container">
      <h2 class="related-products__heading">{{ section.settings.heading }}</h2>
      
      <div class="product-grid product-grid--full">
        {%- for product in recommendations.products limit: section.settings.products_count -%}
          <div class="product-grid__item">
            {% render 'product-card', product: product, lazy_load: true %}
          </div>
        {%- endfor -%}
      </div>
    </div>
  </section>
{%- endif -%}

<style>
  .related-products {
    padding: var(--spacing-sections) 0;
    border-top: 1px solid var(--color-border-light);
  }

  .related-products__heading {
    font-family: var(--font-heading);
    font-size: var(--text-2xl);
    font-weight: var(--font-normal);
    margin-bottom: var(--space-8);
    text-align: center;
  }

  @media (min-width: 768px) {
    .related-products__heading {
      font-size: var(--text-3xl);
    }
  }
</style>

{% schema %}
{
  "name": "Related products",
  "class": "section-related-products",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "You May Also Like"
    },
    {
      "type": "range",
      "id": "products_count",
      "label": "Number of products",
      "min": 2,
      "max": 8,
      "step": 2,
      "default": 4
    }
  ]
}
{% endschema %}
