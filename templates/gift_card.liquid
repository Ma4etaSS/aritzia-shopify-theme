{% layout none %}
<!doctype html>
<html lang="{{ request.locale.iso_code }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="{{ settings.color_background }}">
  <title>{{ 'gift_cards.issued.title' | t: value: gift_card.initial_value, shop: shop.name }}</title>
  
  {{ 'base.css' | asset_url | stylesheet_tag }}
  
  <style>
    .gift-card {
      max-width: 500px;
      margin: 40px auto;
      padding: 40px 20px;
      text-align: center;
      font-family: var(--font-body);
    }
    
    .gift-card__logo {
      margin-bottom: 30px;
    }
    
    .gift-card__logo img {
      max-height: 40px;
    }
    
    .gift-card__title {
      font-family: var(--font-heading);
      font-size: 28px;
      font-weight: 400;
      margin-bottom: 20px;
    }
    
    .gift-card__image-wrapper {
      position: relative;
      margin-bottom: 30px;
    }
    
    .gift-card__image {
      width: 100%;
      max-width: 400px;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    
    .gift-card__amount {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: #fff;
      padding: 8px 16px;
      border-radius: 4px;
      font-weight: 600;
      font-size: 24px;
    }
    
    .gift-card__code-wrapper {
      margin: 30px 0;
    }
    
    .gift-card__code {
      display: inline-block;
      padding: 16px 32px;
      background: #f5f5f5;
      border-radius: 4px;
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 0.1em;
      font-family: monospace;
    }
    
    .gift-card__copy-btn {
      display: block;
      margin: 16px auto 0;
      padding: 12px 24px;
      background: #000;
      color: #fff;
      border: none;
      cursor: pointer;
      font-size: 14px;
      transition: opacity 0.2s;
    }
    
    .gift-card__copy-btn:hover {
      opacity: 0.8;
    }
    
    .gift-card__qr {
      margin-top: 30px;
    }
    
    .gift-card__qr img {
      max-width: 120px;
    }
    
    .gift-card__expiry {
      margin-top: 20px;
      color: #666;
      font-size: 14px;
    }
    
    .gift-card__instructions {
      margin-top: 30px;
      padding-top: 30px;
      border-top: 1px solid #e5e5e5;
      color: #666;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .gift-card__print {
      margin-top: 30px;
    }
    
    .gift-card__print-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      border: 1px solid #000;
      background: transparent;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }
    
    .gift-card__print-btn:hover {
      background: #000;
      color: #fff;
    }
    
    @media print {
      .gift-card__copy-btn,
      .gift-card__print {
        display: none;
      }
    }
  </style>
</head>
<body>
  <main class="gift-card" role="main">
    <div class="gift-card__logo">
      {%- if settings.logo != blank -%}
        <img src="{{ settings.logo | image_url: width: 300 }}" alt="{{ shop.name }}">
      {%- else -%}
        <h1>{{ shop.name }}</h1>
      {%- endif -%}
    </div>
    
    <h2 class="gift-card__title">{{ 'gift_cards.issued.subtext' | t }}</h2>
    
    <div class="gift-card__image-wrapper">
      <img src="{{ 'gift-card/card.svg' | shopify_asset_url }}" alt="Gift Card" class="gift-card__image">
      <span class="gift-card__amount">{{ gift_card.balance | money }}</span>
    </div>
    
    <div class="gift-card__code-wrapper">
      <code class="gift-card__code" id="GiftCardCode">{{ gift_card.code | format_code }}</code>
      <button class="gift-card__copy-btn" onclick="copyCode()">
        {{ 'gift_cards.issued.copy_code' | t }}
      </button>
    </div>
    
    {%- if gift_card.pass_url -%}
      <div class="gift-card__apple-wallet">
        <a href="{{ gift_card.pass_url }}">
          <img src="{{ 'gift-card/add-to-apple-wallet.svg' | shopify_asset_url }}" alt="Add to Apple Wallet">
        </a>
      </div>
    {%- endif -%}
    
    <div class="gift-card__qr">
      <img src="{{ gift_card.qr_code }}" alt="QR Code">
    </div>
    
    {%- if gift_card.expires_on -%}
      <p class="gift-card__expiry">
        {{ 'gift_cards.issued.expiration_date' | t: expires_on: gift_card.expires_on | date: "%B %d, %Y" }}
      </p>
    {%- endif -%}
    
    <div class="gift-card__instructions">
      <p>{{ 'gift_cards.issued.redeem_html' | t: value: gift_card.initial_value, shop_url: shop.url }}</p>
    </div>
    
    <div class="gift-card__print">
      <button class="gift-card__print-btn" onclick="window.print()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
          <polyline points="6 9 6 2 18 2 18 9"/>
          <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
          <rect x="6" y="14" width="12" height="8"/>
        </svg>
        {{ 'gift_cards.issued.print' | t }}
      </button>
    </div>
  </main>
  
  <script>
    function copyCode() {
      const code = document.getElementById('GiftCardCode').textContent;
      navigator.clipboard.writeText(code).then(() => {
        const btn = document.querySelector('.gift-card__copy-btn');
        btn.textContent = '{{ "gift_cards.issued.copy_code_success" | t }}';
        setTimeout(() => {
          btn.textContent = '{{ "gift_cards.issued.copy_code" | t }}';
        }, 2000);
      });
    }
  </script>
</body>
</html>
